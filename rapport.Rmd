---
title: "Rapport – Analyse airbnb Seattle"
author: "Amine Halhali, Ismail Taaissat, Mohammed-Ibrahim Benahmida, Anas Imarrighen"
date: "2025-11-02"
fontsize: 11pt
mainfont: "Times New Roman"
output:
  pdf_document:
    toc: true
    toc_depth: 2
    number_sections: true
    df_print: kable
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(ggplot2)
library(dplyr)
library(tidyr)
library(reshape2)
library(scales)
library(viridis)
library(knitr)
library(broom)
library(patchwork)
airbnb <- read.csv("seattle.csv")
```

\newpage

# Introduction

## Contexte de l’étude

Le marché des locations de courte durée via des plateformes comme airbnb connaît un développement rapide dans les grandes villes. Comprendre les facteurs qui influencent le prix d’une location est essentiel pour les propriétaires souhaitant optimiser leurs revenus, mais aussi pour les voyageurs souhaitant comparer les offres.

## Objectifs

L'objectif de cette analyse est donc de pouvoir observer le lien de corrélation et/ou de causalité entre les paramètres mis à disposition dans le jeu de données. Nous nous attarderons sur les points importants comme le prix et les avis comme base pour notre étude afin de bien répondre à la problématique : Quels facteurs influencent le prix d’une location Airbnb ?

```{r, echo=FALSE}
tab_stats <- airbnb |>
  select(price, reviews, overall_satisfaction, bedrooms, bathrooms, accommodates) |>
  head(20)

knitr::kable(tab_stats, caption = "Visualisation des 20 premières lignes du fichier csv")

```

\newpage

# Description du jeu de données

On compte 17 paramétres différent dans le jeu de données:


-  room_id : correspond à la clé primaire de la table (l'identifiant unique du n-uplet)

-  host_id : correspond à une clé étrangère, sûrement celle d'une table propriétaire

-  room_type : le type de chambre ; on en compte 3 différents (chambre privée, chambre partagée, appartement)

-  adress : l'adresse de la ville dans laquelle l’Airbnb se trouve

-  reviews : le nombre d'avis sur l’Airbnb

-  overall_satisfaction : la note moyenne de l’Airbnb

-  accommodates : capacité de logement en nombre de personnes

-  bedrooms : le nombre de chambre

-  bathrooms : le nombre de salle de bains / toilettes (certains sont à virgule et désigne  des salles de bains et toilettes séparés)

-  price : le prix de la location en lien avec la devise et le temps de réservation

-  last_modified : la dernière modification de l’Airbnb

-  latitude : cet élément représente la latitude de l’Airbnb

-  longitude : cet élément représente la longitude de l’Airbnb

-  location : correspond a la version de latitude et de longitude reconnaissable par la base de données avec une table PostGIS

-  name : le nom du bien immobilier sur Airbnb

-  currency : la devise utilisé pour le paiement

-  rate_type : le mode de facturation

\newpage

# Analyse descriptive

## Statistiques de base
```{r}
# Statistiques de base complètes
tab_stats <- airbnb %>%
  select(price, reviews, bedrooms, bathrooms, accommodates) %>%
  summarise(across(everything(), 
                   list(
                     N = ~ sum(!is.na(.)),
                     Mean = ~ mean(., na.rm = TRUE),
                     SD = ~ sd(., na.rm = TRUE),
                     Min = ~ min(., na.rm = TRUE),
                     Max = ~ max(., na.rm = TRUE),
                     Median = ~ median(., na.rm = TRUE)
                   ), .names = "{.col}_{.fn}")) %>%
  pivot_longer(everything(), names_to = "Variable_Stat", values_to = "Valeur") %>%
  separate(Variable_Stat, into = c("Variable", "Statistique"), sep = "_") %>%
  pivot_wider(names_from = Statistique, values_from = Valeur) %>%
  select(Variable, N, Mean, SD, Median, Min, Max)

# Affichage avec kable seul
kable(tab_stats, digits = 2, 
      caption = "Statistiques descriptives des variables numériques",
      align = c('l', 'c', 'c', 'c', 'c', 'c'))
```

**Observation :** Sur ce tableau, nous pouvons observer une multitude d'informations :

Premièrement, on voit que le fichier contient 7576 n-uplets, ce qui va un peu compliquer la visualisation graphique des données.

Des moyennes importantes sont aussi visibles, comme celles des reviews qui sont assez élevées, et celle du prix à la nuit qui est de 113 dollars américains.

D'autres données y sont présentées, comme l’écart-type (standard deviation, SD), la médiane et les points extrêmes.

On voit d'ailleurs que l’écart-type du prix est assez élevé, et il est même plus grand que la moyenne, ce qui est rare.

## Distribution des variables clés

```{r}
# Distribution du prix - Version améliorée
p1 <- ggplot(airbnb, aes(x = price)) +
  geom_histogram(bins = 40, fill = "steelblue", color = "white", alpha = 0.8) +
  labs(
    title = "Distribution des prix des locations Airbnb à Seattle",
    x = "Prix ($)",
    y = "Nombre de logements",
    caption = paste("Nombre total d'observations :", sum(!is.na(airbnb$price)))
  ) +
  theme_minimal() +
  scale_x_continuous(labels = scales::dollar) +
  theme(
    plot.title = element_text(face = "bold", size = 14),
    plot.subtitle = element_text(color = "gray40")
  )

print(p1)
```

**Observation :** Comme dit précédemment, il est difficile de voir toutes les valeurs, car certaines sont vraiment éloignées et la majorité est proche de la moyenne, comme on peut le voir.

Avec environ 7000 valeurs qui avoisinent le prix de 100 euros, tout le reste est éparpillé juste derrière et quelques-unes sont vers les 4000 euros la nuit.


## Distribution de la satisfaction

```{r}
p2 <- ggplot(airbnb %>% filter(!is.na(overall_satisfaction)), 
             aes(x = overall_satisfaction)) +
  geom_histogram(bins = 20, fill = "coral", color = "white", alpha = 0.8) +
  labs(
    title = "Distribution des notes de satisfaction",
    subtitle = "Échelle de 0 à 5 étoiles",
    x = "Note de satisfaction globale",
    y = "Nombre de logements",
    caption = paste("Moyenne :", round(mean(airbnb$overall_satisfaction, na.rm = TRUE), 2))
  ) +
  theme_minimal() +
  scale_x_continuous(breaks = 0:5) +
  theme(
    plot.title = element_text(face = "bold", size = 14)
  )

print(p2)
```

**Observation :** Là encore, on a du mal à faire la distinction des minorités sur le diagramme, mais ce qui est sûr, c'est qu'une extrême minorité des logements ont de très mauvaises notes.

Avec l'écrasante majorité des cas qui se situe entre 4 et 5 étoiles dans les avis, leurs moyennes sont vraiment bonnes en général.

Cela pose la question : est-ce que la note de satisfaction est vraiment un facteur qui influe sur le prix si la majorité des logements ont une note excellente ?

## Distribution des types de logement

```{r}
p3 <- airbnb %>%
  count(room_type) %>%
  mutate(percentage = n / sum(n) * 100) %>%
  ggplot(aes(x = reorder(room_type, n), y = n, fill = room_type)) +
  geom_col(alpha = 0.8) +
  geom_text(aes(label = paste0(n, "\n(", round(percentage, 1), "%)")), 
            hjust = -0.1, size = 3.5) +
  labs(
    title = "Répartition des types de logement",
    x = "Type de logement",
    y = "Nombre de logements",
    fill = "Type"
  ) +
  coord_flip() +
  theme_minimal() +
  scale_fill_brewer(palette = "Set2") +
  theme(
    plot.title = element_text(face = "bold", size = 14),
    legend.position = "none"
  )

print(p3)
```

**Observation :** Finalement, on peut voir sur ce nouveau diagramme que 74 % des Airbnb sont des appartements à louer, ce qui est en toute logique la base de leur plateforme de vente.

Avec un nombre minime de chambres partagées et quelques chambres privées, encore une fois, est-ce que le type de chambre influe sur le prix ?

# Analyse exploratoire bivariée

## Corrélations entre variables numériques

```{r}
num_df <- airbnb %>%
select(price, reviews, overall_satisfaction, bedrooms, bathrooms, accommodates)
corr_mat <- cor(num_df, use = "complete.obs")
corr_long <- melt(corr_mat)
ggplot(corr_long, aes(Var1, Var2, fill = value)) +
geom_tile() +
geom_text(aes(label = round(value, 2)))
```

**Observation :** Au départ, nous nous posions la question de la corrélation entre les variables. Et bien, il existe une matrice de corrélation qui peut mettre en exergue celle-ci.

Analysons, étape par étape, cette matrice :

-En premier lieu, nous voyons que la diagonale des croisements entre mêmes variables est toujours égale à 1, ce qui correspond à une corrélation parfaite.

-Ensuite, nous voyons que les nombres assombris sont à faibles coefficients, voire des valeurs négatives, donc de très faible corrélation.

-Finalement, on voit certaines cases avec des coefficients assez hauts, comme ceux des chambres, salles de bains / toilettes et de la capacité d'hébergement.

Maintenant que nous avons une idée des principales variables numériques, prenons un exemple et faisons une étude pour le nombre de chambres, qui paraît assez évident.


## Visualisation : 

```{r}
ggplot(airbnb, aes(bedrooms, price)) +
  geom_point(alpha=0.5) +
  geom_smooth(method="lm", color="red") +
  labs(title="Prix en fonction du nombre de chambres")

```

**Observation :** Comme on le voit bien ici, la tendance montre que le prix augmente avec le nombre de chambres, ce qui valide le lien de corrélation entre les deux.

On remarque aussi que ce graphique montre davantage les valeurs extrêmes comparé aux autres.

\newpage

# Modélisation

Qu'est-ce qu'une régression ?
Une régression est une méthode statistique qui permet de modéliser la relation entre une variable à expliquer et une ou plusieurs variables explicatives.

C'est exactement ce que l'on cherche à faire.
## Régression linéaire multiple

```{r}
model_lm <- lm(price ~ reviews + overall_satisfaction + bedrooms + bathrooms + accommodates, data=airbnb)
kable(tidy(model_lm), digits = 3,
      caption = "Résumé du modèle linéaire")

```

**Observation :** Analysons maintenant la régression, qui nous dit :

On voit que pour chaque unité de variable ajoutée, il y a une valeur ajoutée en dollars au prix :
-0,11 $ pour chaque review en plus

-8 $ par unité de capacité en plus

-21,7 $ pour les salles de bains

-26 $ pour les chambres

-20 $ pour les unités de satisfaction

\newpage

## Régression logarithmique

```{r}
model_log <- lm(log(price) ~ reviews + overall_satisfaction + bedrooms + bathrooms + accommodates, data=airbnb)
kable(tidy(model_log), digits = 3,
      caption = "Résumé du modèle logarithmique")
```

**Observation :** Pour la régression logarithmique c'est une valeur en % qu'il nous retourne et non une valeur en dollar
On voit pour chaque unité de variable ajouté qu'il y a une augmentation du prix en % :

-  -1% pour chaque avis en plus

-  +22% pour chaque point de satisfaction

-  +14% pour les chambres 

-  +3% pour les salles de bains

-  +9% pour la capacité

\newpage

# Analyse géographique

## Cartographie des prix par coordonnées

```{r}
ggplot(airbnb, aes(longitude, latitude, color=price)) +
  geom_point(alpha=0.7) +
  scale_color_viridis_c() +
  labs(title="Carte des prix airbnb à Seattle")

```

**Observation :** Maintenant que les variables numériques ont été étudiées, nous pouvons passer aux autres, à savoir la latitude, l'adresse, la longitude et la localisation, qui forment la géographie des Airbnb.

Ce qu'on peut déduire de cette carte, c'est que la concentration est très forte dans la partie ouest de la ville.

On notera qu'il y a une sorte de rivière visible sur l'application qui sépare les deux parties de points.
On observe aussi qu'il y a très peu de différences de couleurs, et tout cela à cause des valeurs extrêmes, comme déjà mentionné.

\newpage

# Interprétation et conclusions

**Conclusion :** Notre analyse des données Airbnb de Seattle nous permet de répondre à la problématique initiale concernant les facteurs influençant le prix des locations. Les résultats démontrent que les caractéristiques physiques des logements constituent les déterminants principaux, avec le nombre de chambres comme facteur le plus significatif, suivi par les salles de bain et la capacité d'accueil. La satisfaction des clients, bien que moins déterminante que les caractéristiques structurelles, exerce néanmoins une influence notable sur la fixation des prix. La distribution géographique révèle une forte concentration des offres dans le centre-ville, sans pour autant montrer des disparités de prix marquées entre les différents secteurs. Cette étude confirme ainsi l'importance des attributs tangibles du logement dans la stratégie tarifaire, tout en soulignant la valeur économique de la réputation numérique dans l'économie collaborative.

